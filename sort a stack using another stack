#include <stdio.h>
#define MAX 100

int mainStack[MAX], sortedStack[MAX];
int top1 = -1, top2 = -1;

void pushMain(int val) {
    if (top1 < MAX - 1)
        mainStack[++top1] = val;
    else
        printf("Main stack overflow!\n");
}

int popMain() {
    if (top1 >= 0)
        return mainStack[top1--];
    else
        return -1;
}

void pushSorted(int val) {
    if (top2 < MAX - 1)
        sortedStack[++top2] = val;
    else
        printf("Sorted stack overflow!\n");
}

int popSorted() {
    if (top2 >= 0)
        return sortedStack[top2--];
    else
        return -1;
}

int peekSorted() {
    if (top2 >= 0)
        return sortedStack[top2];
    else
        return -1;
}

void displayMain() {
    if (top1 == -1)
        printf("Main stack is empty!\n");
    else {
        printf("Main stack elements:\n");
        for (int i = top1; i >= 0; i--)
            printf("%d\n", mainStack[i]);
    }
}

void sortStack() {
    if (top1 == -1) {
        printf("Main stack is empty! Cannot sort.\n");
        return;
    }

    while (top1 != -1) {
        int temp = popMain();

        while (top2 != -1 && peekSorted() > temp)
            pushMain(popSorted());

        pushSorted(temp);
    }

    printf("Sorted stack (ascending order):\n");
    while (top2 != -1)
        printf("%d\n", popSorted());
}

int main() {
    int choice, val;

    while (1) {
        printf("\n---- MENU ----\n");
        printf("1. Push element to main stack\n");
        printf("2. Display main stack\n");
        printf("3. Sort stack\n");
        printf("4. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);

        switch (choice) {
        case 1:
            printf("Enter value to push: ");
            scanf("%d", &val);
            pushMain(val);
            break;
        case 2:
            displayMain();
            break;
        case 3:
            sortStack();
            break;
        case 4:
            printf("Exiting program.\n");
            return 0;
        default:
            printf("Invalid choice! Try again.\n");
        }
    }

    return 0;
}
